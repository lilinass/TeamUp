<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" type="image/png" href="./Images/Logo v2.png" />
    <title>Koordy ‚Äì Association</title>
    <meta name="description" content="Page d‚Äôaccueil d‚Äôune association sportive sur Koordy." />
    <link rel="stylesheet" href="style.css" />

</head>

<body>
    <div id="asso-container"></div>

    <!-- Topbar -->
    <div class="topbar" role="region" aria-label="Infos rapides">
        <div class="container topbar__inner">
            <p class="topbar__note">
                Prochain entra√Ænement : <strong>Mercredi 19h</strong> ‚Äì Salle omnisports.
            </p>
            <nav class="topbar__links" aria-label="Liens utilitaires">
                <a href="#" class="link">Billetterie</a>
                <a href="#" class="link">Boutique</a>
                <a href="#" class="link">FR</a>
            </nav>
        </div>
    </div>

    <!-- Header -->
    <header class="site-header" role="banner">
        <div class="container site-header__inner">
            <!-- Logo / marque -->
            <a href="/" class="brand">
                <img src="./Images/Logo v2.png" alt="Koordy" class="brand__logo" />
                <span class="brand__name">Koordy</span>
            </a>

            <!-- Navigation principale de l‚Äôasso -->
            <nav class="nav" aria-label="Navigation principale">
                <ul class="nav__list">
                    <li>
                        <a class="nav__link is-active" href="#hero">Accueil</a>
                    </li>
                    <li>
                        <a class="nav__link" href="#about">Association</a>
                    </li>
                    <li>
                        <a class="nav__link" href="#teams">√âquipes / Activit√©s</a>
                    </li>
                    <li>
                        <a class="nav__link" href="#events">√âv√®nement</a>
                    </li>
                    <li>
                        <a class="nav__link" href="#actus">Actualit√©s</a>
                    </li>
                    <li>
                        <a class="nav__link" href="#contact">Contact</a>
                    </li>
                </ul>
            </nav>

            <!-- Boutons auth -->
            <div id="user-badge" class="auth-buttons"></div>

        </div>
    </header>

    <main>
        <!-- HERO ASSOCIATION -->
        <section id="hero" class="hero hero--asso" role="region" aria-label="Pr√©sentation de l‚Äôassociation">
            <!-- image de fond sp√©cifique √† l‚Äôasso -->
            <div id="asso-cover" class="hero__bg hero__bg--asso" aria-hidden="true"
                style="background-image: url('./Images/image.png')"></div>

            <div class="container hero__content hero__content--asso">
                <div class="hero__top">
                    <!-- bloc identit√© avec image de profil -->
                    <div class="hero__identity">
                        <div class="hero__avatar">
                            <img id="asso-avatar" src="./Images/default-asso.png" alt="Logo de l'association" />
                        </div>

                        <div class="hero__identity-text">
                            <div class="hero__eyebrow">Association</div>
                            <h1 id="asso-name" class="hero__title hero__title--asso">
                                Handball Club Koordy
                            </h1>
                            <p id="asso-subtitle" class="hero__desc hero__desc--small">
                                Nantes ¬∑ Handball
                            </p>
                        </div>
                    </div>

                    <!-- stats + boutons -->
                    <div class="hero__side">
                        <div class="hero__meta">
                            <div class="hero-stat">
                                <span id="stat-membres" class="hero-stat__value">150</span>
                                <span class="hero-stat__label">Licenci√©s</span>
                            </div>
                            <div class="hero-stat">
                                <span id="stat-equipes" class="hero-stat__value">8</span>
                                <span class="hero-stat__label">√âquipes</span>
                            </div>
                            <div class="hero-stat">
                                <span id="stat-events" class="hero-stat__value">3</span>
                                <span class="hero-stat__label">√âv√©nements ce mois-ci</span>
                            </div>
                        </div>

                        <div class="hero__actions">
                            <a href="/connexion" class="btn btn--primary">
                                Rejoindre l‚Äôassociation
                            </a>
                            <a href="#contact" class="btn btn--ghost">
                                Nous contacter
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- QUI SOMMES-NOUS ? -->
        <section id="about" class="section section--asso-about" aria-labelledby="about-title">
            <div class="container">
                <h2 id="about-title" class="section__title section__title--line">
                    QUI SOMMES-NOUS ?
                </h2>

                <div class="asso-about">
                    <p>
                        Le Handball Club Koordy est une association loi 1901 qui
                        accueille aujourd‚Äôhui plus de
                        <strong>150 adh√©rents</strong>, des cat√©gories jeunes
                        jusqu‚Äôaux √©quipes s√©niors. Notre objectif : permettre √†
                        chacun de progresser dans un cadre bienveillant, tout en
                        partageant les valeurs du handball.
                    </p>
                    <p>
                        Encadr√©s par une √©quipe d‚Äô√©ducateurs dipl√¥m√©s et de nombreux
                        b√©n√©voles, nos licenci√©s √©voluent dans un environnement
                        s√©curis√© et structur√©. En parall√®le de la pratique sportive,
                        le club met en place des actions citoyennes, des stages
                        vacances, ainsi que des √©v√©nements conviviaux pour faire
                        vivre la communaut√© Koordy.
                    </p>
                </div>
            </div>
        </section>

        <!-- √âQUIPES / ACTIVIT√âS (simple teaser pour l‚Äôinstant) -->
        <section id="teams" class="section section--asso-teams" aria-labelledby="teams-title">
            <div class="container">
                <h2 id="teams-title" class="section__title section__title--line">
                    NOS √âQUIPES & ACTIVIT√âS
                </h2>

                <div class="cards cards--news">
                    <article class="card">
                        <div class="card__body">
                            <h3 class="card__title">√âcole de hand</h3>
                            <p class="card__meta">U9 ¬∑ U11</p>
                            <p class="card__text">
                                D√©couverte du handball √† travers le jeu, dans une
                                ambiance ludique et encadr√©e.
                            </p>
                        </div>
                    </article>

                    <article class="card">
                        <div class="card__body">
                            <h3 class="card__title">Collectifs jeunes</h3>
                            <p class="card__meta">U13 √† U18</p>
                            <p class="card__text">
                                Entra√Ænements r√©guliers, comp√©titions de championnat
                                et tournois r√©gionaux.
                            </p>
                        </div>
                    </article>

                    <article class="card">
                        <div class="card__body">
                            <h3 class="card__title">Section loisirs</h3>
                            <p class="card__meta">Adultes</p>
                            <p class="card__text">
                                Pratique sans pression du r√©sultat, pour garder la
                                forme et partager un bon moment chaque semaine.
                            </p>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <!-- CONSEIL DU CLUB -->
        <section id="conseil" class="section section--asso-conseil" aria-labelledby="conseil-title">
            <div class="container">
                <h2 id="conseil-title" class="section__title section__title--line">
                    LE CONSEIL DU CLUB
                </h2>

                <div class="conseil-grid">
                    <!-- Membre 1 -->
                    <article class="conseil-card">
                        <div class="conseil-card__avatar">
                            <img src="./Images/conseil/president.jpg" alt="Photo de la pr√©sidente" />
                        </div>
                        <h3 class="conseil-card__name">Alexandra Martin</h3>
                        <p class="conseil-card__role">Pr√©sidente du club</p>
                    </article>

                    <!-- Membre 2 -->
                    <article class="conseil-card">
                        <div class="conseil-card__avatar">
                            <img src="./Images/conseil/directeur_sportif.jpg" alt="Photo du directeur sportif" />
                        </div>
                        <h3 class="conseil-card__name">Thomas Lef√®vre</h3>
                        <p class="conseil-card__role">Directeur sportif</p>
                    </article>

                    <!-- Membre 3 -->
                    <article class="conseil-card">
                        <div class="conseil-card__avatar">
                            <img src="./Images/conseil/respo_jeunes.jpg" alt="Photo de la responsable jeunes" />
                        </div>
                        <h3 class="conseil-card__name">In√®s Dupont</h3>
                        <p class="conseil-card__role">Responsable cat√©gorie jeunes</p>
                    </article>

                    <!-- Membre 4 -->
                    <article class="conseil-card">
                        <div class="conseil-card__avatar">
                            <img src="./Images/conseil/trezorier.jpg" alt="Photo du tr√©sorier" />
                        </div>
                        <h3 class="conseil-card__name">Julien Moreau</h3>
                        <p class="conseil-card__role">Tr√©sorier</p>
                    </article>
                </div>
            </div>
        </section>

        <!-- CALENDRIER DES √âV√âNEMENTS -->
        <section id="events" class="section section--asso-events" aria-labelledby="events-title">
            <!-- Titre + actions -->
            <div class="container section__head">
                <h2 id="events-title" class="section__title section__title--line">
                    CALENDRIER DES √âV√âNEMENTS
                </h2>

                <div class="events-head-actions">
                    <!-- Filtre mois (pour plus tard, JS) -->
                    <select id="events-month-filter" class="events-filter">
                        <option value="all">Tous les mois</option>
                        <option value="01">Janvier</option>
                        <option value="02">F√©vrier</option>
                        <option value="03">Mars</option>
                        <option value="04">Avril</option>
                        <option value="05">Mai</option>
                        <option value="06">Juin</option>
                        <option value="07">Juillet</option>
                        <option value="08">Ao√ªt</option>
                        <option value="09">Septembre</option>
                        <option value="10">Octobre</option>
                        <option value="11">Novembre</option>
                        <option value="12">D√©cembre</option>
                    </select>

                    <!-- Bouton visible plus tard uniquement pour les admins via JS -->
                    <button id="btn-add-event" class="btn btn--primary btn--sm btn--admin-only" type="button">
                        Ajouter un √©v√©nement
                    </button>
                </div>
            </div>

            <!-- Layout calendrier / liste d‚Äô√©v√©nements -->
            <div class="container events-layout">
                <!-- Colonne gauche : petit r√©sum√© / l√©gende -->
                <aside class="events-side">
                    <p class="events-side__title">Vue rapide</p>
                    <p class="events-side__text">
                        Consultez les prochains matchs, entra√Ænements, r√©unions
                        et √©v√©nements du club. Les membres convi√©s recevront une notification
                        (plus tard via ton back).
                    </p>

                    <ul class="events-legend">
                        <li><span class="events-dot events-dot--match"></span> Match</li>
                        <li><span class="events-dot events-dot--training"></span> Entra√Ænement</li>
                        <li><span class="events-dot events-dot--meeting"></span> R√©union</li>
                        <li><span class="events-dot events-dot--other"></span> Autre</li>
                    </ul>
                </aside>

                <!-- Colonne droite : ‚Äúcalendrier d‚Äô√©v√©nements‚Äù sous forme de liste -->
                <div class="events-main">
                    <p id="events-empty" class="events-empty">
                        Aucun √©v√©nement √† venir pour le moment.
                    </p>

                    <div id="events-list" class="events-list">
                        <!-- √âV√âNEMENT EXEMPLE STATIQUE (tu peux le laisser le temps de d√©velopper) -->
                        <article class="events-card" data-date="2025-03-14" data-type="match">
                            <div class="events-card__date">
                                <span class="events-card__day">14</span>
                                <span class="events-card__month">MARS</span>
                            </div>

                            <div class="events-card__content">
                                <h3 class="events-card__title">
                                    HCK ‚Äì Match √† domicile U15
                                </h3>
                                <p class="events-card__meta">
                                    Samedi ¬∑ 17h00 ¬∑ Koordy Arena
                                </p>
                                <p class="events-card__text">
                                    Rencontre de championnat r√©gionale, convocation des licenci√©s U15
                                    √† 16h00 pour l‚Äô√©chauffement.
                                </p>
                                <div class="events-card__tags">
                                    <span class="events-tag events-tag--match">Match</span>
                                    <span class="events-tag">U15</span>
                                </div>
                            </div>
                        </article>

                        <article class="events-card" data-date="2025-03-20" data-type="training">
                            <div class="events-card__date">
                                <span class="events-card__day">20</span>
                                <span class="events-card__month">MARS</span>
                            </div>

                            <div class="events-card__content">
                                <h3 class="events-card__title">
                                    Entra√Ænement collectif s√©niors
                                </h3>
                                <p class="events-card__meta">
                                    Jeudi ¬∑ 20h00 ¬∑ Koordy Arena
                                </p>
                                <p class="events-card__text">
                                    S√©ance de pr√©paration avant le d√©placement du week-end. Pr√©sence
                                    vivement recommand√©e pour tous les joueurs s√©niors.
                                </p>
                                <div class="events-card__tags">
                                    <span class="events-tag events-tag--training">Entra√Ænement</span>
                                    <span class="events-tag">S√©niors</span>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </section>


        <!-- DERNI√àRES ACTUALIT√âS -->
        <section id="actus" class="section" aria-labelledby="news-title">
            <div class="container section__head">
                <h2 id="news-title" class="section__title">
                    DERNI√àRES ACTUALIT√âS
                </h2>

                <a href="#" class="section__cta">
                    Voir toutes les actus du club
                </a>
            </div>

            <div class="container">
                <p id="news-empty" class="events-empty">
                    Aucune actualit√© pour le moment.
                </p>

                <div id="news-list" class="cards cards--news">
                    <!-- Cartes d‚Äôactualit√©s g√©n√©r√©es en JS -->
                </div>
            </div>
        </section>


        <!-- CONTACT / INFOS PRATIQUES -->
        <section id="contact" class="section section--asso-contact" aria-labelledby="contact-title">
            <div class="container contact-grid">
                <div>
                    <h2 id="contact-title" class="section__title section__title--line">
                        INFOS PRATIQUES
                    </h2>
                    <p><strong>Adresse :</strong> 12 rue des Sports</p>
                    <p><strong>Ville :</strong> 44000 Nantes</p>
                    <p><strong>Gymnase principal :</strong> Salle Koordy Arena</p>
                </div>

                <div>
                    <h2 class="section__title section__title--line">CONTACT</h2>
                    <p>
                        <strong>Email :</strong>
                        <a href="mailto:contact@hckoordy.fr">contact@hckoordy.fr</a>
                    </p>
                    <p><strong>T√©l√©phone :</strong> 06 12 34 56 78</p>

                    <div class="asso-socials">
                        <a href="#" target="_blank">Facebook</a>
                        <a href="#" target="_blank">Instagram</a>
                        <a href="#" target="_blank">Site web</a>
                    </div>
                </div>
            </div>
        </section>
    </main>
<script>
/* ============================================================
   üîµ 1) Charger les informations de l'association
   - priorit√© : association s√©lectionn√©e (recherche)
   - fallback : association du membre connect√©
   ============================================================ */
async function loadAssociation() {
  const idAssociation = localStorage.getItem("id_association");
  const idMembre = localStorage.getItem("id_membre");

  let asso = null;

  try {
    // üü¢ CAS 1 : on arrive depuis la recherche d‚Äôassociation
    if (idAssociation) {
      const res = await fetch(
        `http://localhost:8080/api/associations/${idAssociation}`
      );
      asso = await res.json();
    }

    // üü° CAS 2 : fallback ‚Üí association li√©e au membre
    if ((!asso || !asso.id_association) && idMembre) {
      const res = await fetch(
        `http://localhost:8080/api/membre/${idMembre}/association`
      );
      asso = await res.json();
    }

    if (!asso || !asso.id_association) {
      console.warn("Aucune association trouv√©e.");
      return;
    }

    console.log("Association charg√©e :", asso);

    /* ===== Injection dans le DOM ===== */

    // Nom de l'association
    if (asso.nom && document.getElementById("asso-name")) {
      document.getElementById("asso-name").textContent = asso.nom;
    }

    // Sous-titre : ville ¬∑ sport
    const subtitle = `${asso.ville || ""} ¬∑ ${asso.sport || ""}`.trim();
    if (document.getElementById("asso-subtitle")) {
      document.getElementById("asso-subtitle").textContent = subtitle;
    }

    // Avatar / logo
    if (asso.image && document.getElementById("asso-avatar")) {
      document.getElementById("asso-avatar").src = asso.image;
    }

    // Image de couverture
    if (asso.image && document.getElementById("asso-cover")) {
      document.getElementById("asso-cover").style.backgroundImage =
        `url('${asso.image}')`;
    }

    // Couleurs personnalis√©es
    if (asso.couleur_1 && asso.couleur_2) {
      document.documentElement.style.setProperty("--brand", asso.couleur_1);
      document.documentElement.style.setProperty("--brand-2", asso.couleur_2);
    }

  } catch (error) {
    console.error("Erreur chargement association :", error);
  }
}



/* ============================================================
   üîµ 2) Charger l'utilisateur connect√© et afficher le menu ‚ñº
   ============================================================ */
async function loadUser() {
  const id_membre = localStorage.getItem("id_membre");
  const badge = document.getElementById("user-badge");

  if (!badge) return;

  // üü• Utilisateur non connect√©
  if (!id_membre) {
    badge.innerHTML = `
      <a href="/connexion" class="btn btn--ghost btn--sm">Se connecter</a>
      <a href="/inscription" class="btn btn--primary btn--sm">S‚Äôinscrire</a>
    `;
    return;
  }

  try {
    const res = await fetch(
      `http://localhost:8080/api/membre/${id_membre}`
    );
    const user = await res.json();

    badge.innerHTML = `
      <div class="user-dropdown">
        <button id="userDropdownBtn" class="user-dropdown-btn">
          Bienvenue, ${user.prenom_membre} ‚ñº
        </button>

        <div id="userDropdownMenu" class="user-dropdown-menu">
          <a href="/membre">Mon profil</a>
          <a href="/events_page">Mes √©v√®nements</a>
          <button id="logoutBtn">Se d√©connecter</button>
        </div>
      </div>
    `;

    const btn = document.getElementById("userDropdownBtn");
    const menu = document.getElementById("userDropdownMenu");

    // Ouvrir / fermer le menu
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      menu.style.display = menu.style.display === "flex" ? "none" : "flex";
    });

    // D√©connexion
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("id_membre");
      localStorage.removeItem("id_association");
      window.location.href = "/";
    });

    // Fermer le menu si clic ailleurs
    document.addEventListener("click", () => {
      menu.style.display = "none";
    });

  } catch (error) {
    console.error("Erreur chargement utilisateur :", error);
  }
}



/* ============================================================
   üöÄ 3) Lancer au chargement de la page
   ============================================================ */
loadAssociation();
loadUser();
</script>




</body>

</html>